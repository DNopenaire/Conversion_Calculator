<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Convertisseur Adresse IP</title>
  <style>
    body {
      background-color: #2e2e2e;
      color: #ffffff;
      font-family: Arial, sans-serif;
      text-align: center;
      padding: 20px;
    }
    input, button {
      font-size: 14px;
      padding: 8px;
      margin: 5px;
      background-color: #3e3e3e;
      color: #ffffff;
      border: none;
      border-radius: 4px;
    }
    button {
  background-color: #000000; /* Noir profond */
  color: #ffffff;
  border: 1px solid #00ffcc; /* Liseré turquoise pour contraste */
  cursor: pointer;
  transition: background-color 0.3s, border-color 0.3s;
}
button:hover {
  background-color: #111111; /* Noir légèrement plus clair au survol */
  border-color: #ffffff;     /* Liseré blanc au survol */
}


    .group {
      margin: 20px auto;
      padding: 10px;
      border: 1px solid #555;
      border-radius: 6px;
      width: fit-content;
      display: inline-block;
      background-color: #3e3e3e;
    }
    .group h3 {
      margin-bottom: 10px;
      color: #00ffcc;
    }
    #result {
      margin-top: 20px;
      color: #00ffcc;
      font-weight: bold;
    }
    #actions {
      margin-top: 20px;
    }
  </style>
</head>
<body>
  <h2>Convertisseur Adresse IP</h2>
  <p>Entrez une adresse IP, binaire, hexadécimale ou décimale :</p>
  <input type="text" id="input" size="40" placeholder="Ex: 192.168.0.1 ou C0A80001">
  <br>

  <div class="group">
    <h3>IP</h3>
    <button onclick="run('IP → Binaire')">IP → Binaire</button>
    <button onclick="run('IP → Hexadécimal')">IP → Hexadécimal</button>
    <button onclick="run('IP → Décimal')">IP → Décimal</button>
  </div>

  <div class="group">
    <h3>Binaire</h3>
    <button onclick="run('Binaire → IP')">Binaire → IP</button>
    <button onclick="run('Binaire → Hexadécimal')">Binaire → Hexadécimal</button>
    <button onclick="run('Binaire → Décimal')">Binaire → Décimal</button>
  </div>

  <div class="group">
    <h3>Décimal</h3>
    <button onclick="run('Décimal → IP')">Décimal → IP</button>
    <button onclick="run('Décimal → Hexadécimal')">Décimal → Hexadécimal</button>
    <button onclick="run('Décimal → Binaire')">Décimal → Binaire</button>
  </div>

  <div class="group">
    <h3>Hexadécimal</h3>
    <button onclick="run('Hexadécimal → IP')">Hexadécimal → IP</button>
    <button onclick="run('Hexadécimal → Binaire')">Hexadécimal → Binaire</button>
    <button onclick="run('Hexadécimal → Décimal')">Hexadécimal → Décimal</button>
  </div>

  <div id="result"></div>

  <div id="actions">
    <button onclick="copierResultat()">Copier le résultat</button>
    <button onclick="resetChamps()">Reset</button>
  </div>

  <script>
    function normaliserIP(ip) {
      let octets = ip.trim().split('.');
      while (octets.length < 4) octets.push('0');
      return octets.slice(0, 4).join('.');
    }

    function ipVersBinaire(ip) {
      ip = normaliserIP(ip);
      let octets = ip.split('.');
      try {
        let bin = octets.map(o => {
          let n = parseInt(o);
          if (n < 0 || n > 255) throw "Erreur";
          return n.toString(2).padStart(8, '0');
        });
        return bin.join('.');
      } catch {
        return "Erreur : IP invalide.";
      }
    }

    function binaireVersIP(binaire) {
      binaire = binaire.replace(/\./g, '').padStart(32, '0');
      let octets = [];
      for (let i = 0; i < 32; i += 8) {
        octets.push(binaire.slice(i, i + 8));
      }
      try {
        let ip = octets.map(b => parseInt(b, 2));
        return ip.join('.');
      } catch {
        return "Erreur : Format binaire incorrect.";
      }
    }

    function ipVersHex(ip) {
      ip = normaliserIP(ip);
      let octets = ip.split('.');
      try {
        let hex = octets.map(o => parseInt(o).toString(16).padStart(2, '0'));
        return "0x" + hex.join('').toUpperCase();
      } catch {
        return "Erreur : IP invalide.";
      }
    }

    function ipVersDecimal(ip) {
      ip = normaliserIP(ip);
      let octets = ip.split('.');
      try {
        return octets.reduce((acc, o, i) => acc + (parseInt(o) << (8 * (3 - i))), 0).toString();
      } catch {
        return "Erreur : IP invalide.";
      }
    }

    function binaireVersHex(binaire) {
      let ip = binaireVersIP(binaire);
      return ip.startsWith("Erreur") ? ip : ipVersHex(ip);
    }

    function binaireVersDecimal(binaire) {
      binaire = binaire.replace(/\./g, '');
      if (!/^[01]+$/.test(binaire)) return "Erreur : Le nombre binaire contient des caractères non valides.";
      return parseInt(binaire.padStart(32, '0'), 2).toString();
    }

    function hexVersIP(hex) {
      hex = hex.replace(/^0x/i, '').padStart(8, '0');
      try {
        let ip = [];
        for (let i = 0; i < 8; i += 2) {
          ip.push(parseInt(hex.slice(i, i+2), 16));
        }
        return ip.join('.');
      } catch {
        return "Erreur : Format hexadécimal incorrect.";
      }
    }

    function hexVersBinaire(hex) {
      let ip = hexVersIP(hex);
      return ip.startsWith("Erreur") ? ip : ipVersBinaire(ip);
    }

    function hexVersDecimal(hex) {
      let ip = hexVersIP(hex);
      return ip.startsWith("Erreur") ? ip : ipVersDecimal(ip);
    }

    function decimalVersIP(dec) {
      try {
        let n = parseInt(dec);
        if (n < 0 || n > 4294967295) throw "Erreur";
        return [3,2,1,0].map(i => (n >> (8*i)) & 255).join('.');
      } catch {
        return "Erreur : Valeur décimale hors plage.";
      }
    }

    function decimalVersHex(dec) {
      let ip = decimalVersIP(dec);
      return ip.startsWith("Erreur") ? ip : ipVersHex(ip);
    }

    function decimalVersBinaire(dec) {
      let ip = decimalVersIP(dec);
      return ip.startsWith("Erreur") ? ip : ipVersBinaire(ip);
    }

    const conversions = {
      "IP → Binaire": ipVersBinaire,
      "IP → Hexadécimal": ipVersHex,
      "IP → Décimal": ipVersDecimal,
      "Binaire → IP": binaireVersIP,
      "Binaire → Hexadécimal": binaireVersHex,
      "Binaire → Décimal": binaireVersDecimal,
      "Hexadécimal → Binaire": hexVersBinaire,
      "Hexadécimal → IP": hexVersIP,
      "Hexadécimal → Décimal": hexVersDecimal,
      "Décimal → IP": decimalVersIP,
      "Décimal → Hexadécimal": decimalVersHex,
      "Décimal → Binaire": decimalVersBinaire
    };

    function run(label) {
      const input = document.getElementById("input").value;
      const func = conversions[label];
      const output = func ? func(input) : "Conversion inconnue.";
      document.getElementById("result").textContent = `${label} : ${output}`;
    }

    function copierResultat() {
      const texte = document.getElementById("result").textContent;
      if (texte) {
        navigator.clipboard.writeText(texte).then(() => {
          alert("Résultat copié dans le presse-papiers !");
        }).catch(() => {
          alert("Impossible de copier le résultat.");
        });
      }
    }

    function resetChamps() {
      document.getElementById("input").value = "";
      document.getElementById("result").textContent = "";
    }
  </script>
</body>
</html>
